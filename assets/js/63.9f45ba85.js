(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{558:function(a,t,s){"use strict";s.r(t);var e=s(6),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h4",{attrs:{id:"安装与配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装与配置"}},[a._v("#")]),a._v(" 安装与配置")]),a._v(" "),s("h5",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("p",[a._v("1、官网下载 apache james 3.0应用包，并进行解压\n"),s("img",{attrs:{src:"http://cdn.gqsu.top/james03-1.png",alt:""}})]),a._v(" "),s("p",[a._v("2、进入"),s("code",[a._v("/conf")]),a._v("目录，去掉所有的-template。如：sqlResources-template.xml更名为sqlResources.xml\n"),s("img",{attrs:{src:"http://cdn.gqsu.top/james03-2.png",alt:""}})]),a._v(" "),s("p",[a._v("3、修改james-database.properties")]),a._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("database.driverClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("com.mysql.jdbc.Driver")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("database.url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("jdbc:mysql://localhost:3306/email")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("database.username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("root")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("database.password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("root")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("vendorAdapter.database")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("MYSQL")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("openjpa.streaming")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n")])])]),s("p",[a._v("4、执行如下命令,查看能否正常启动")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[a._v("$ run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("bat\n")])])]),s("p",[a._v("正常启动的话，会在数据库里生成表："),s("br"),a._v(" "),s("img",{attrs:{src:"http://cdn.gqsu.top/james03-03.png",alt:""}})]),a._v(" "),s("p",[a._v("如果不能正常启动，请查看端口是否有被占用\n一般情况下，可能需要修改的文件有:")]),a._v(" "),s("blockquote",[s("p",[a._v("dnsservice.xml（修改DNS）"),s("br"),a._v("\ndomainlist.xml(改成自己的域名)"),s("br"),a._v("\njames-database.properties（修改DB信息，conf/lib目录下放相应的jar包）"),s("br"),a._v("\nmailetcontainer.xml（修改postmaster）"),s("br"),a._v("\nsmtpserver.xml (限制邮件大小： 10240，限制10M； 注释掉： 127.0.0.0/8，否则外网邮件发不出去；\n修改helloName)")])]),a._v(" "),s("p",[a._v("5、由于开启了smtp认证，需要进行一些其他操作：")]),a._v(" "),s("p",[a._v("打开mailetcontainer.xml，注释掉如下语句：")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('\x3c!--<mailet match="RemoteAddrNotInNetwork=127.0.0.1" class="ToProcessor">\n       <processor>relay-denied</processor>\n       <notice>550 - Requested action not taken: relaying denied</notice>\n</mailet>--\x3e')]),a._v("\n")])])]),s("p",[a._v("开启Imap服务，imapserver.xml：")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("lmtpserver")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("p",[a._v("修改smtpserver.xml和pop3server.xml配置")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 将自动检测关闭，指定为自己的。默认是注释掉的，即开启状态 --\x3e")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("helloName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("autodetect")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("test.com"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("helloName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("p",[a._v("6、James运行/启动命令：")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[a._v("$ james install\n$ james "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("start")]),a._v("\n")])])]),s("p",[a._v("如果启动或创建出现拒绝访问应该是权限的问题，需管理员运行cmd"),s("br"),a._v("\n如果自建项目，集成参考：http://blog.csdn.net/afgasdg/article/details/6706512")]),a._v(" "),s("h5",{attrs:{id:"快速启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速启动"}},[a._v("#")]),a._v(" 快速启动")]),a._v(" "),s("p",[a._v("可参见："),s("a",{attrs:{href:"http://james.apache.org/server/3/quick-start.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文档"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("这里，需要注意的是，添加域名/用户：")]),a._v(" "),s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[a._v("$ james"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cli")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("h localhost "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p 9999 adddomain test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("com\n$ james"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cli")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("h localhost "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p 9999 adduser test@test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("com test\n$ james"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cli")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("h localhost "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p 9999 adduser test2@test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("com test2\n")])])]),s("p",[a._v("参考："),s("a",{attrs:{href:"https://www.jianshu.com/p/59e91d424f70",target:"_blank",rel:"noopener noreferrer"}},[a._v("配置文件详解"),s("OutboundLink")],1)]),a._v(" "),s("h5",{attrs:{id:"对比2-0版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对比2-0版本"}},[a._v("#")]),a._v(" 对比2.0版本")]),a._v(" "),s("p",[a._v("1、3.0的配置文件不在是一个，而是多个。可以理解为将原先的config配置拆分成了多个子配置。\n2、2.0启动需要后台启动服务，且服务不能关闭（命令行），3.0直接启动james start即可，而run.bat类似于控制台\n3、自定义的驱动包存放路径 "),s("code",[a._v("\\conf\\lib\\")]),a._v("下")]),a._v(" "),s("p",[a._v("百度文库：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("james2.0版本能收发邮件，不能修改邮件状态（已读、已删除..）、不能添加自定义文件夹（只有一个收件箱）、\n不能移动邮件到其他文件夹（这些问题本质上是james2.0版本不支持imap协议）；\njames3.0-M2版本不存在上述问题，但是wulun2.0还是3.0都不支持oracle链接\n")])])]),s("h5",{attrs:{id:"备注"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备注"}},[a._v("#")]),a._v(" 备注")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("database.properties     :  数据库属性配置（当以DB作为Repository的时候应用）      \ndnsservice.xml            ：配置DNS   \ndomainlist.xml            ：配置域列表   \nfetchmail.xml              ：取邮件   \nimapserver.xml            ：IMAP协议服务配置   \njcr-repository.xml        ：配置Jackrabbit repository   \njmx.properties             ：配置JMX参数，用于监控                     \nlmtpserver.xml            ：配置 IMTP协议服务   \nlog4j.properties           ：日志配置   \nmailbox.xml                ：邮件箱配置   \nmailetcontainer.xml     ：Maillet容器参数配置   \nmailrepositorystore.xml   ：邮件repository配置（DB JCR MEM etc..）   \npop3server.xml           ：  配置POP3协议服务   \nrecipientrewritetable.xml ：暂不知是什么作用    \nsmtpserver.xml             ：配置SMTP协议服务   \nsqlResources.xml         ：配置Repository为DB时候的表结构   \nusersrepository23.xml    ：暂不知于usersrepository.xml区别   \nusersrepository.xml        ：用户Repository配置  \n")])])]),s("h5",{attrs:{id:"bug修复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bug修复"}},[a._v("#")]),a._v(" Bug修复")]),a._v(" "),s("p",[a._v("1、修改了配置文件，则一定要先james stop，然后执行run.bat，接着在james start。"),s("br"),a._v("\n最好的步骤是james remove --\x3e run.bat --\x3e james install --\x3e james start")]),a._v(" "),s("p",[a._v("2、运行"),s("code",[a._v("run.bat")]),a._v("报错，原因是步骤2没有执行，这点在官网文档的里有详细的说明。")]),a._v(" "),s("p",[a._v("3、利用foxmail进行本地验证时，发现无法发送/接受邮件，请查看smtpserver.xml和pop3server.xml配置")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 将自动检测关闭，指定为自己的。默认是注释掉的，即开启状态 --\x3e")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("helloName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("autodetect")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("test.com"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("helloName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("h4",{attrs:{id:"表结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表结构"}},[a._v("#")]),a._v(" 表结构")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("james_mail    :邮件表。用于存储邮件信息\n")])])]),s("h4",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[a._v("#")]),a._v(" 说明")]),a._v(" "),s("p",[a._v("1、james_mailbox记录用户的收发邮件操作，User_Name是执行的用户名，MailBox_Name对应操作类别\nINBOX（收取）和Sent（发送）。\n2、")]),a._v(" "),s("h4",{attrs:{id:"修改james-mailbox表结构即可webmail收取第三方邮件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改james-mailbox表结构即可webmail收取第三方邮件"}},[a._v("#")]),a._v(" 修改james_mailbox表结构即可WebMail收取第三方邮件")]),a._v(" "),s("p",[a._v("新增NETBOX_PASSWORD（其他邮箱加密后的密码）、PASSWORD_HASH_ALGORITHM（加密所使用的算法）、\nNEWEST_SENT_DATE（最新的收取邮件时间）三个字段")])])}),[],!1,null,null,null);t.default=r.exports}}]);