(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{648:function(t,a,r){"use strict";r.r(a);var s=r(6),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h3",{attrs:{id:"sql查询性能剖析"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sql查询性能剖析"}},[t._v("#")]),t._v(" SQL查询性能剖析")]),t._v(" "),r("p",[t._v("两种方式：")]),t._v(" "),r("ul",[r("li",[t._v("1、剖析数据库服务器，分析压力来源。包括磁盘空间、内存、CPU、网络连接等服务器状态分析，和从整体角度分析，如：系统、功能、子任务、连接、索引、IO、排序、分组、发送数据分析等。")]),t._v(" "),r("li",[t._v("2、sql语句优化")])]),t._v(" "),r("h3",{attrs:{id:"sql优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sql优化"}},[t._v("#")]),t._v(" SQL优化")]),t._v(" "),r("h4",{attrs:{id:"大批量插入"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#大批量插入"}},[t._v("#")]),t._v(" 大批量插入")]),t._v(" "),r("p",[t._v("执行"),r("code",[t._v("SET UNIQUE_CHECKS=0")]),t._v("，关闭唯一性校验，带导入之后再打开设置为1。设置SET AUTOCOMMIT=0，关闭自动提交，导入后结束再设置为1。然后 load data infile 'mysql/bulk_insert.txt' into table user;")]),t._v(" "),r("h4",{attrs:{id:"insert优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#insert优化"}},[t._v("#")]),t._v(" INSERT优化")]),t._v(" "),r("p",[t._v("尽量使用多个值表的 INSERT 语句，在 values 后面输入多个值。")]),t._v(" "),r("h4",{attrs:{id:"group-by优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#group-by优化"}},[t._v("#")]),t._v(" GROUP BY优化")]),t._v(" "),r("p",[t._v("GROUP BY语句会对其后出现的字段进行默认排序（非主键情况），可使用 ORDER BY NULL进行禁止排序达到优化目的，避免Using filesort警告。")]),t._v(" "),r("h4",{attrs:{id:"or优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#or优化"}},[t._v("#")]),t._v(" OR优化")]),t._v(" "),r("p",[t._v("当MySQL使用OR查询时，如果要利用索引的话，必须每个条件列都使独立索引，而不是复合索引（多列索引），才能保证使用到查询的时候使用到索引。")]),t._v(" "),r("h4",{attrs:{id:"order-by优化"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#order-by优化"}},[t._v("#")]),t._v(" ORDER BY优化")]),t._v(" "),r("ul",[r("li",[t._v("ORDER BY后面如果有多个单独key（单独索引），不走索引，除非是复合索引，即key_part1，key_part2可以。")]),t._v(" "),r("li",[t._v("ORDER BY中混合ASC和DESC，不走索引。")]),t._v(" "),r("li",[t._v("查询WHERE 后的字段与ORDER BY 后的字段不一样，不走索引。")])]),t._v(" "),r("h4",{attrs:{id:"use-index参考索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#use-index参考索引"}},[t._v("#")]),t._v(" USE INDEX参考索引")]),t._v(" "),r("h4",{attrs:{id:"ignore-index忽略索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ignore-index忽略索引"}},[t._v("#")]),t._v(" IGNORE INDEX忽略索引")]),t._v(" "),r("h4",{attrs:{id:"force-index强制索引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#force-index强制索引"}},[t._v("#")]),t._v(" FORCE INDEX强制索引")])])}),[],!1,null,null,null);a.default=e.exports}}]);