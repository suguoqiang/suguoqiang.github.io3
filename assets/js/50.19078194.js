(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{544:function(t,s,a){"use strict";a.r(s);var e=a(6),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("服务器系统：centOs 7")]),t._v(" "),a("h4",{attrs:{id:"node-js部署之启动后台运行-forever"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-js部署之启动后台运行-forever"}},[t._v("#")]),t._v(" node.js部署之启动后台运行 forever")]),t._v(" "),a("h5",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("可官网下载安装包上传或者选择直接在线下载，默认存放位置为tmp")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr      \n$ mkdir nodejs     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建node存放目录")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nodejs\n$ tar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("xvf node"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xz       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#解压")]),t._v("\n")])])]),a("p",[t._v("建立软连接，变为全局：")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ ln "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nodejs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x64"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("npm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" \n$ ln "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nodejs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("x64"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n")])])]),a("p",[t._v("查看是否安装完成：")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ node "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v\n")])])]),t._v(" "),a("h5",{attrs:{id:"安装forever全局进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装forever全局进程"}},[t._v("#")]),t._v(" 安装forever全局进程")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ npm install forever "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g\n")])])]),a("h5",{attrs:{id:"运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[t._v("#")]),t._v(" 运行")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ forever "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" XXX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n")])])]),a("p",[t._v("如果你需要用npm start来运行你的程序，则用命令")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ forever "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("c "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm start"')]),t._v(" 路径\n")])])]),a("h5",{attrs:{id:"关闭"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭"}},[t._v("#")]),t._v(" 关闭")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ forever stop XXX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n")])])]),a("h4",{attrs:{id:"安装reids"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装reids"}},[t._v("#")]),t._v(" 安装Reids")]),t._v(" "),a("p",[t._v("下载地址："),a("a",{attrs:{href:"http://redis.io/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1),t._v("，下载最新版本。这里采用的是源码编译安装方式")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ wget http:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("download"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("stable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz\n$ tar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("zxvf redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("stable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz \n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("stable "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis\n$ cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n$ make\n$ cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src\n$ make install\n$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("server\n")])])]),a("h5",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("编辑redis.conf配置文件，设置为后台启动，将属性 daemonize 属性改为yes")]),t._v(" "),a("h5",{attrs:{id:"配置redis集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置redis集群"}},[t._v("#")]),t._v(" 配置redis集群")]),t._v(" "),a("p",[t._v("1、安装集群脚本ruby文件的处理工具：")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##安装Ruby")]),t._v("\n$ yum install ruby\n$ ruby "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v\n")])])]),a("p",[t._v("2、")]),t._v(" "),a("h4",{attrs:{id:"安装elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装elasticsearch"}},[t._v("#")]),t._v(" 安装Elasticsearch")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装与配置")]),t._v("\n$ wget https:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("artifacts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elastic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("co"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("downloads"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("elasticsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("elasticsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz\n$ vi "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("elasticsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("4"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("elasticsearch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yml\n")])])]),a("p",[t._v("添加如下内容")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# network.host: 0.0.0.0")]),t._v("\n  http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enabled: true\n  http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allow"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("origin: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n  http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allow"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("methods: OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("HEAD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("GET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("POST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("PUT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("DELETE\n  http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allow"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("headers: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-Requested-With, Content-Type, Content-Length, X-Users"')]),t._v("\n")])])]),a("p",[t._v("其他配置信息：")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("vi "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("sysctl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加下面配置：")]),t._v("\nvm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("max_map_count=655360\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 并执行生效命令：")]),t._v("\nsysctl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 然后，重新启动elasticsearch，即可启动成功")]),t._v("\nvi  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("security"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("limits"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf\n添加如下，必须重启系统才能生效。\nsoft nofile 65536\nsoft nproc 2048\nhard nofile 131072\nhard nproc 4096！\n")])])]),a("p",[t._v("关闭防火墙拦截：")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("firewall"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cmd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("permanent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("zone=public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add-port")]),t._v("=9200"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tcp\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 防火墙重新启动")]),t._v("\nfirewall"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cmd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("reload\n")])])]),a("p",[t._v("添加work用户，并启动")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加用户 work")]),t._v("\nuseradd work\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 为work添加密码123.abc")]),t._v("\npasswd work\n123"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("abc\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除用户 work")]),t._v("\nuserdel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rf work\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 密码长度")]),t._v("\nauthconfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("passminlen=6 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("update\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  添加权限 ./home下所有目录及文件")]),t._v("\nchown "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("R work:work "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("home\nsh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("elasticsearch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("4"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("elasticsearch\n")])])]),a("h4",{attrs:{id:"安装zookeeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装zookeeper"}},[t._v("#")]),t._v(" 安装zookeeper")]),t._v(" "),a("p",[t._v("官网下载压缩包：zookeeper-3.4.9.tar.gz\n解压zookeeper-3.4.9.tar.gz")]),t._v(" "),a("p",[t._v("将 "),a("code",[t._v("~/conf/zoo_sample.cfg")]),t._v("复制为"),a("code",[t._v("zoo.cfg")]),t._v("，并添加或修改如下信息：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 必须配置信息，数据目录和日志目录")]),t._v("\ndataDir "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  /opt/zookeeper-3.4.9/data\ndataLogDir "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /opt/zookeeper-3.4.9/logs\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#dataDir=D:\\\\Program Files\\\\zookeeper-3.4.10\\\\data")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#dataLogDir=D:\\\\Program Files\\\\zookeeper-3.4.10\\\\log")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可选配置")]),t._v("\ntickTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\ntickTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\nclientPort "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\ninitLimit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\nsyncLimit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### 集群配置，单机下不需要。集群的其他配置请自行百度")]),t._v("\nserver.1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node1:2888:3888\nserver.2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node2:2888:3888\nserver.3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("node3:2888:3888\n")])])]),a("p",[t._v("在"),a("code",[t._v("~/bin")]),t._v("下启动 zkServer.cmd。(linux下安装类似)\n相关命令如下：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("启动服务器：./zkServer.sh start\n停止服务器：./zkServer.sh stop\n启动客户端：./zkCli.sh\n退出客户端："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("zk: localhost:2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CONNECTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" quit\nls:查看当前znode中所包含的内容\nls2:查看当前节点数据并能看到更新次数等数据\nstat:查看节点状态 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stat")]),t._v(" /tebieshuai\nset:设置节点的具体值\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" 节点 value值 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" /tebieshuai new_value\nget:获得节点的值 get /shuai\nget节点\ndelete：可以删除指定znode，当该znode拥有子znode时，必须先删除其所有子znode，否则操作将失败。\nrmr：命令可用于代替delete命令，rmr是一个递归删除命令，如果发生指定节点拥有子节点时，rmr命令会首先删除子节点。\nrmr /chou000000008\ncreate：\ncreate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" path data acl\n普通创建：不带有-s、-e参数\n-s：含有序列 create -s /chou "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n-e：临时（重启或者超时消失）create -s -e /templ uuu\n")])])]),a("p",[t._v("补充：在dubbo框架下设置zookeeper的配置:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#服务消费地址(集群配置)")]),t._v("\ndubbo.registry.consumer.address=zookeeper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//172.18.61.72"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("backup=172.18.61.73"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("172.18.61.74"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#服务注册地址(本地配置)")]),t._v("\ndubbo.registry.provider.address=zookeeper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#上述的配置方法，用于本地测试某一个服务，但是又不会影响到服务器上的服务。即本地服务注册本地，本地消费，其他服务来源于服务器")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#于是作为纯消费者(调用后台)，需要配置如下信息，即优先本地服务然后服务器上的服务")]),t._v("\ndubbo.registry.address=zookeeper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//127.0.0.1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2181 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" zookeeper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//172.18.61.72"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("backup=172.18.61.73"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("172.18.61.74"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\n")])])]),a("p",[t._v("如果采用 "),a("code",[t._v("dubbo-spring-boot-starter")]),t._v("，可以直接在Application.yml下配置：")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.spring.boot"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("dubbo-spring-boot-starter"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.0.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## dubbo 设置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dubbo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" screen\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dubbo\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("serialization")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hessian2\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("registry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("address")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" zookeeper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//172.18.61.72"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("2181"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("backup=172.18.61.73"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("172.18.61.74"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#      address: zookeeper://127.0.0.1:2181")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("basePackages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.jwt.screen.service.impl\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("consumer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("check")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n")])])]),a("p",[t._v("更多配置可参考：https://blog.csdn.net/jeffli1993/article/details/71480627")])])}),[],!1,null,null,null);s.default=r.exports}}]);