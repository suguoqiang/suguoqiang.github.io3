(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{567:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"安装与启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装与启动"}},[t._v("#")]),t._v(" 安装与启动")]),t._v(" "),a("p",[t._v("官网下载.msi,按照提示完成安装。\n在安装目录的 "),a("code",[t._v("data")]),t._v("文件夹下，新建db文件夹，用于存放数据。默认为："),a("code",[t._v("C:\\data\\db\\")])]),t._v(" "),a("p",[t._v("正常启动会出现：\n"),a("img",{attrs:{src:"http://cdn.gqsu.top/mongo01-1.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("如果启动闪退，可以定义.bat文件，然后输入如下内容，避免每次指明db路径")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("mongod.exe --dbpath "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\Program Files\\MongoDB\\Server'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\4"}},[t._v("\\4")]),t._v('.0\\data\\db"')]),t._v("\n")])])]),t._v(" "),a("p",[t._v("也可通过浏览器访问http://localhost:27017/，页面上输出：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("It looks like you are trying to access MongoDB over HTTP on the native driver port.\n")])])]),a("p",[t._v("保持服务后台运行，在"),a("code",[t._v("bin")]),t._v("目录下，打开"),a("code",[t._v("mongo.exe")]),t._v("打开客户端终端窗口，完成一些操作。")]),t._v(" "),a("p",[t._v("当然，你可以将mongo的安装目录下的"),a("code",[t._v("bin")]),t._v("目录添加到环境变量中，这样就可以直接在命令行中启动服务了。但是需特别注意，一定要先启动mongod(服务端程序)，且保持服务一直运行，然后在启动mongo(客户端程序)完成一些操作。")]),t._v(" "),a("h3",{attrs:{id:"开启安全认证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启安全认证"}},[t._v("#")]),t._v(" 开启安全认证")]),t._v(" "),a("p",[t._v("完成安全认证的前提是，需要创建用户,语法如下：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("db.createUser("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pwd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    customData"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("any info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    roles"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<role>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<db>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<role>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("db"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<db>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n")])])]),a("blockquote",[a("p",[t._v("mongodb内建的角色: "),a("code",[t._v("read")]),t._v(","),a("code",[t._v("readWrite")]),t._v(","),a("code",[t._v("dbAdmin")]),t._v(",  "),a("code",[t._v("userAdmin")]),t._v("\n下面的角色，只在admin数据库中才能用：\n"),a("code",[t._v("dbOwner,dbAdminAnyDatabase，userAdminAnyDatabase，readWriteAnyDatabase，readAnyDatabase，clusterAdmin，root(超级管理员)")])])]),t._v(" "),a("p",[t._v("添加成功后，会显示Json格式的信息以及success的成功信息")]),t._v(" "),a("h4",{attrs:{id:"_1、具体操作-创建用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、具体操作-创建用户"}},[t._v("#")]),t._v(" 1、具体操作：创建用户")]),t._v(" "),a("p",[t._v("这里创建用户：root，密码：root，权限：只读权限read或者创建者dbOwner。")]),t._v(" "),a("blockquote",[a("p",[t._v("特别注意：下面的命令所处在的 use  db库，这将直接导致 db.auth 验证，必须保证两个相同，比如你在admin库中创建，那么你只能在admin库完成认证，角色里的db只是他可以操作的数据库。")])]),t._v(" "),a("p",[t._v("在未开启权限认证的情况下，启动服务端，然后启动客户端")]),t._v(" "),a("blockquote",[a("p",[t._v("建议在添加完用户后，指明--auth开启权限认证功能（后续操作）。这里是第一次启动，不需要太多操作，未开启权限，首次链接是不需要账号和密码的。")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#先创建一个未来将要用到的数据库，如demo，然后创建用户")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" use demo   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注意一定要在 demo 数据库中操作，才可以正确连接")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(",pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(",roles:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dbAdmin"')]),t._v(",db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("，"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"readWrite"')]),t._v(",db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("，"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("role:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userAdmin"')]),t._v(",db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \n")])])]),a("p",[t._v("然后需要进行认证，判断是否创建成功。在启动 "),a("code",[t._v(".bat")]),t._v("文件中加入权限认证，即开启认证客户端")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("mongod.exe --auth --dbpath "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\Program Files\\MongoDB\\Server'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\4"}},[t._v("\\4")]),t._v('.0\\data\\db"')]),t._v("\n")])])]),a("p",[t._v("或者在配置文件"),a("code",[t._v("mongod.cfg")]),t._v("中配置，然后直接启动"),a("code",[t._v("mongo.exe")]),t._v("客户端：（任选其一）")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" enabled\n")])])]),a("p",[t._v("接着在命令行中加入，正常会返回1：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("db.auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("注意，查看添加的用户信息在admin表中查看，创建了demo库，但是没有显示，是因为没有数据，向其中插入一条数据即可完成显示。还需要注意的是插入操作也要先选择库。")])]),t._v(" "),a("h4",{attrs:{id:"_2、相关关键操作-概括"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、相关关键操作-概括"}},[t._v("#")]),t._v(" 2、相关关键操作（概括）")]),t._v(" "),a("p",[t._v("在配置文件"),a("code",[t._v("mongod.cfg")]),t._v("中开启安全认证，设置：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("security")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("authorization")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" enabled\n")])])]),a("p",[t._v("重新启动服务端，然后通过远程连接")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("mongo admin -u root -p root    //连接到Mongo数据库\n")])])]),a("p",[t._v("windows平台下，指定.bat文件，然后开启安全认证：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("mongod.exe --auth --port "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27017")]),t._v(" --dbpath "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:/Program Files/MongoDB/Server/4.0/data"')]),t._v("\n")])])]),a("p",[t._v("然后打开mongo.exe，在窗口内完成安全认证即可（此处的认证要与创建用户的db位置相同）：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3、其他用户操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、其他用户操作"}},[t._v("#")]),t._v(" 3、其他用户操作")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.changeUserPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改密码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.dropUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除用户角色")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.grantRolesToUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"read"')]),t._v(",db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加用户角色")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.revokeRolesFromUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"read"')]),t._v(",db:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#回收用户角色")]),t._v("\n")])])]),a("h3",{attrs:{id:"开启监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启监控"}},[t._v("#")]),t._v(" 开启监控")]),t._v(" "),a("p",[t._v("1、自带的功能：")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ mongostat\n")])])]),a("p",[t._v("或者：")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ mongotop\n")])])]),a("p",[t._v("或者(启动的时候添加--rest参数，开启28017端口，然后通过浏览器访问):")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("./mongod --dbpath "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/data/db/ --rest\n")])])]),a("p",[t._v("2、自带的数据库状态查看：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("db.serverStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("db.stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("db.collection.stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("参考："),a("a",{attrs:{href:"https://blog.csdn.net/u013614451/article/details/48900867",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"bug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bug"}},[t._v("#")]),t._v(" Bug")]),t._v(" "),a("p",[t._v("1、闪退问题(原因不存在数据存储路径)")]),t._v(" "),a("blockquote",[a("p",[t._v("在某一个位置创建文件夹，此处我设置的为D盘mongoData文件夹。打开cmd，进入到MongoDB的bin目录下，输入mongod --dbpath D:/mongoData即可修复")])]),t._v(" "),a("h3",{attrs:{id:"基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本操作"}},[t._v("#")]),t._v(" 基本操作")]),t._v(" "),a("p",[t._v("默认会连接到test数据库")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show dbs       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看当前有哪些数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看当前所在的数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" use admin       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#切换到 admin 数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" use demo       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#切换，不存在则创建 demo 数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show collections      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看当前数据库中有哪些集合，注意只有当数据库中有数据才会显示(例如上面的demo)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.dropDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除当前所在的数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" user admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" show "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("users")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看 admin 库下的所有用户")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.system.users.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看系统所有用户，必须是在admin库下才能看到")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.system.users.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除系统内所有帐户")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"george"')]),t._v(",pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1234"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建了 msgInfo 这个集合，并往其中插入一条数据;另一种实现方式为 save")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看 msgInfo 集合的所有数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"george"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age:22"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改数据，修改的是整个文档，会替换掉数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"george"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$set")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9999"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改数据，部分修改，只会修改对应的字段值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"george"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#条件查找")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.drop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除 msgInfo 集合")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"george"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除某一条数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.getIndexes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.ensuerIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建索引，1表示正序索引，-1表示逆序索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.dropIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#格式化显示数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("key "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gt")]),t._v(":value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看 msgInfo 这个集合中，key>value 的数据。类似的还有：（1）大于等于: {key : {$gte:value} }、（2）小于：{key : {$lt:value} }、（3）小于等于：{key : {$lte:value}}、（4）不等于：{key : {$ne:value} }、（5）且操作AND： {key1:value1, key2:value2, key3:value3 …} (6)或操作OR： {$or: [{key1: value1}, {key2:value2} ]} ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.msgInfo.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("likes:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gte")]),t._v(":888"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$or")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mongo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spring"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#复杂查询语句，类似sql语句 like>=888 && (username=”mongo” or username=”spring”)")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v('需要特别注意的是，insert和save方法中如果包含"_id"字段，save方法会覆盖掉之前的数据，而insert则不会插入成功。\nfind()语法：find({},{KEY:1/0}) find的第二个参数，KEY为要显示或隐藏的字段，value为1表示显示，0表示隐藏，默认为1。find()方法后面还可以跟 limit(n), skip(n), sort({key:value}),分别实现限制返回的结果条数、跳过多少条数据和排序功能。sort({key:value,...})语法中，key表示要排序的字段，value的可取值为 1 / -1 。1表示升序asc，-1表示降序desc')])]),t._v(" "),a("h3",{attrs:{id:"非关系型数据库-mongdb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非关系型数据库-mongdb"}},[t._v("#")]),t._v(" 非关系型数据库:Mongdb")]),t._v(" "),a("h4",{attrs:{id:"_1-创建数据库-use-database-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建数据库-use-database-name"}},[t._v("#")]),t._v(" 1.创建数据库："),a("code",[t._v("use DATABASE_NAME")]),t._v("；")]),t._v(" "),a("h4",{attrs:{id:"_2-查看数据库-show-database-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-查看数据库-show-database-name"}},[t._v("#")]),t._v(" 2.查看数据库： "),a("code",[t._v("show DATABASE_NAME")]),t._v(";")]),t._v(" "),a("h4",{attrs:{id:"_3-删除数据库-db-dropdatabase"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-删除数据库-db-dropdatabase"}},[t._v("#")]),t._v(" 3.删除数据库："),a("code",[t._v("db.dropDatabase()")]),t._v("；")]),t._v(" "),a("h4",{attrs:{id:"_4-删除集合-db-collection-drop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-删除集合-db-collection-drop"}},[t._v("#")]),t._v(" 4.删除集合："),a("code",[t._v("db.collection.drop()")]),t._v("；")]),t._v(" "),a("h4",{attrs:{id:"_5-插入文档-db-collection-name-insert-document"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-插入文档-db-collection-name-insert-document"}},[t._v("#")]),t._v(" 5.插入文档："),a("code",[t._v("db.COLLECTION_NAME.insert(document)")]),t._v("；")]),t._v(" "),a("h4",{attrs:{id:"_6-更新文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-更新文档"}},[t._v("#")]),t._v(" 6.更新文档：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n{ \tupsert: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tmulti: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\twriteConcern: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("query")]),t._v(" : update的查询条件，类似sql update查询内where后面的。")]),t._v(" "),a("li",[a("code",[t._v("update")]),t._v(": update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查询内set后面的")]),t._v(" "),a("li",[a("code",[t._v("upsert")]),t._v(" : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。")]),t._v(" "),a("li",[a("code",[t._v("multi")]),t._v(" : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。")]),t._v(" "),a("li",[a("code",[t._v("writeConcern")]),t._v(" :可选，抛出异常的级别。")])]),t._v(" "),a("h4",{attrs:{id:"_7-传入的文档来替换已有文档-保存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-传入的文档来替换已有文档-保存"}},[t._v("#")]),t._v(" 7.传入的文档来替换已有文档（保存） ：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n{\n\twriteConcern: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n} "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("document")]),t._v(" : 文档数据。")]),t._v(" "),a("li",[a("code",[t._v("writeConcern")]),t._v(" :可选，抛出异常的级别。")])]),t._v(" "),a("blockquote",[a("p",[t._v('@Id   注释在实体类的属性"id"上，替换mongo自动生成的"_id"，在mongo里"_id"具有唯一性')])]),t._v(" "),a("p",[t._v("更多实例:")]),t._v(" "),a("p",[t._v("只更新第一条记录：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : { $gt : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" } } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" { $"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" : { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test2"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("} } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("全部更新：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : { $gt : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" } } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" { $"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" : { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test2"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("} }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("只添加第一条：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : { $gt : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" } } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" { $"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" : { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test5"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("} }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("全部添加加进去:")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : { $gt : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" } } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" { $"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" : { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test5"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("} }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("全部更新：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : { $gt : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" } } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" { $inc : { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("} }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("只更新第一条记录：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : { $gt : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" } } "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" { $inc : { "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("} }"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"_8-删除文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-删除文档"}},[t._v("#")]),t._v(" 8.删除文档：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n{\n\tjustOne: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\twriteConcern: "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n}\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("参数说明：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("query")]),t._v(":（可选）删除的文档的条件。")]),t._v(" "),a("li",[a("code",[t._v("justOne")]),t._v(" : （可选）如果设为 true 或 1，则只删除一个文档。")]),t._v(" "),a("li",[a("code",[t._v("writeConcern")]),t._v(" :（可选）抛出异常的级别。")])]),t._v(" "),a("h4",{attrs:{id:"_9-查询文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-查询文档"}},[t._v("#")]),t._v(" 9.查询文档：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" projection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n")])])]),a("ul",[a("li",[a("code",[t._v("query")]),t._v(" ：可选，使用查询操作符指定查询条件")]),t._v(" "),a("li",[a("code",[t._v("projection")]),t._v(" ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）")])]),t._v(" "),a("p",[t._v("注：若要用以易读（格式化）的方式来显示文档："),a("code",[t._v("db.col.find().pretty()")]),t._v("；")]),t._v(" "),a("p",[t._v("多条件查询（AND）："),a("code",[t._v("db.col.find({key1:value1, key2:value2}).pretty()")]),t._v("\n或查询（Or）：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n{\n   $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      {key1: value1}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" {key2:value2}\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n}\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；          \n")])])]),a("h4",{attrs:{id:"_10-清空结合-db-col-remove"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-清空结合-db-col-remove"}},[t._v("#")]),t._v(" 10.清空结合："),a("code",[t._v("db.col.remove({})")]),t._v("；")]),t._v(" "),a("h4",{attrs:{id:"_11-mongodb中条件操作符有"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-mongodb中条件操作符有"}},[t._v("#")]),t._v(" 11.MongoDB中条件操作符有：")]),t._v(" "),a("p",[t._v("(>) 大于 - "),a("code",[t._v("$gt")]),t._v("\n(<) 小于 - "),a("code",[t._v("$lt")]),t._v("\n(>=) 大于等于 - "),a("code",[t._v("$gte")]),t._v("\n(<= ) 小于等于 - "),a("code",[t._v("$lte")])])])}),[],!1,null,null,null);s.default=e.exports}}]);