(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{595:function(t,s,e){"use strict";e.r(s);var n=e(6),o=Object(n.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("blockquote",[e("p",[t._v("受武汉新型冠状病毒的影响，闲来无事在家，写点东西。顺便研究下微信公众号和小程序的相关技术问题，为后期微信改版和App建设提供技术保障。")])]),t._v(" "),e("h3",{attrs:{id:"问题一"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题一"}},[t._v("#")]),t._v(" 问题一")]),t._v(" "),e("p",[t._v("正常分享状态显示：\n"),e("img",{attrs:{src:"http://cdn.gqsu.top/weShare-02.png",alt:""}}),t._v("\n异常分享状态显示：\n"),e("img",{attrs:{src:"http://cdn.gqsu.top/weShare-01.png",alt:""}})]),t._v(" "),e("p",[t._v("在微信公众号后台自定义菜单，但是出现分享异常的状态，虽然页面能够打开，但是显示的描述信息和图标都不正常。出现这种情况的主要原因是未进行微信安全验证。\n"),e("img",{attrs:{src:"http://cdn.gqsu.top/weShare-03.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("简单描述如下：前端引入微信jssdk，"),e("code",[t._v('<script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"><\/script>')]),t._v(",通过固定格式："),e("code",[t._v("window.location.href.split('#')[0]")]),t._v("获取分享链接的最原始链接，去掉所有请求参数发送到自己的后台服务器，自己的后台服务器对请求进行验证，连接微信后台，获取accessToken和ticket，然后对一些相关参数进行sha1加密，再将加密后的信息返回到前端页面。其实最重要的就是一个签名的授权过程，有了这个就可以正常显示了。\n对了，别忘了在微信公众号后台配置JS安全域名哦。")])]),t._v(" "),e("p",[t._v("官方的示例代码：http://demo.open.weixin.qq.com/jssdk/sample.zip")]),t._v(" "),e("blockquote",[e("p",[t._v("观察正常显示的消息推送可知，分享时可以加上用户自己的个人头像，分享的标题栏也可以自己定义，比如：你是第xxxx个转发的人，这些数据都可以通过后台返回。")])])])}),[],!1,null,null,null);s.default=o.exports}}]);