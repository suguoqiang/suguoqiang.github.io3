(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{608:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"魔板引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#魔板引擎"}},[t._v("#")]),t._v(" 魔板引擎")]),t._v(" "),s("p",[t._v("例如，代码自动生成模块，利用的就是velocity自定好的模板文件.vm。")]),t._v(" "),s("h3",{attrs:{id:"配置文件优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件优先级"}},[t._v("#")]),t._v(" 配置文件优先级")]),t._v(" "),s("ol",[s("li",[t._v("file:./config/ (当前项目路径config目录下);")]),t._v(" "),s("li",[t._v("file:./ (当前项目路径下);")]),t._v(" "),s("li",[t._v("classpath:/config/ (类路径config目录下);")]),t._v(" "),s("li",[t._v("classpath:/ (类路径config下).")])]),t._v(" "),s("p",[t._v("优先级由高到底，高优先级的配置会覆盖低优先级的配置")]),t._v(" "),s("h3",{attrs:{id:"静态资源默认配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#静态资源默认配置"}},[t._v("#")]),t._v(" 静态资源默认配置")]),t._v(" "),s("p",[t._v("1、命名规则：")]),t._v(" "),s("ul",[s("li",[t._v("/static")]),t._v(" "),s("li",[t._v("/public")]),t._v(" "),s("li",[t._v("/resources")]),t._v(" "),s("li",[t._v("/META-INF/resources")])]),t._v(" "),s("p",[t._v("2、模板引擎：")]),t._v(" "),s("ul",[s("li",[t._v("Thymeleaf")]),t._v(" "),s("li",[t._v("FreeMarker")]),t._v(" "),s("li",[t._v("Velocity")]),t._v(" "),s("li",[t._v("Groovy")]),t._v(" "),s("li",[t._v("Mustache")])]),t._v(" "),s("h3",{attrs:{id:"移除某些自动化配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移除某些自动化配置"}},[t._v("#")]),t._v(" 移除某些自动化配置")]),t._v(" "),s("p",[t._v("1、使⽤了"),s("code",[t._v("@SpringBootApplication")]),t._v("的时候:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootApplication")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exclude"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSourceAutoConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("2、使用了"),s("code",[t._v("@EnableAutoConfiguration")]),t._v("的时候")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableAutoConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exclude"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSourceAutoConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("3、或者通过配置文件：")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring.autoconfigure.exclude")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("org.springframework.boot.autoconfigure.jdbc.DataSource AutoConfiguration")]),t._v("\n")])])]),s("h3",{attrs:{id:"springboot启动顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot启动顺序"}},[t._v("#")]),t._v(" springBoot启动顺序")]),t._v(" "),s("p",[t._v("这里调用的是AbstractApplicationContext的refresh()方法刷新上下文。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("1、this.prepareRefresh();\n准备启动spring容器，设置容器的启动日期和活动标志")])]),t._v(" "),s("li",[s("p",[t._v("2、ConfigurableListableBeanFactory beanFactory = this.obtainFreshBeanFactory();\n主要是创建beanFactory，同时加载配置文件.xml中的beanDefinition"),s("br"),t._v("\n通过String[] configLocations = getConfigLocations()获取资源路径，然后加载beanDefinition")])]),t._v(" "),s("li",[s("p",[t._v("3、this.prepareBeanFactory(beanFactory);\n给beanFactory注册一些标准组件，如ClassLoader，StandardEnvironment，BeanProcess")])]),t._v(" "),s("li",[s("p",[t._v("4、this.postProcessBeanFactory(beanFactory);\n提供给子类实现一些postProcess的注册，如AbstractRefreshableWebApplicationContext注册一些Servlet相关的postProcess，真对web进行生命周期管理的Scope，通过registerResolvableDependency()方法注册指定ServletRequest，HttpSession，WebRequest对象的工厂方法。")])]),t._v(" "),s("li",[s("p",[t._v("5、this.invokeBeanFactoryPostProcessors(beanFactory);\n调用所有BeanFactoryProcessor的postProcessBeanFactory()方法")])]),t._v(" "),s("li",[s("p",[t._v("6、this.registerBeanPostProcessors(beanFactory);\n注册BeanPostProcessor，BeanPostProcessor作用是用于拦截Bean的创建")])]),t._v(" "),s("li",[s("p",[t._v("7、this.initMessageSource();\n初始化消息Bean")])]),t._v(" "),s("li",[s("p",[t._v("8、this.initApplicationEventMulticaster();\n初始化上下文的事件多播组建，ApplicationEvent触发时由multicaster通知给ApplicationListener")])]),t._v(" "),s("li",[s("p",[t._v("9、this.onRefresh();\nApplicationContext初始化一些特殊的bean")])]),t._v(" "),s("li",[s("p",[t._v("10、this.registerListeners();\n注册事件监听器，事件监听Bean统一注册到multicaster里头，ApplicationEvent事件触发后会由multicaster广播")])]),t._v(" "),s("li",[s("p",[t._v("11、this.finishBeanFactoryInitialization(beanFactory);\n非延迟加载的单例Bean实例化")])]),t._v(" "),s("li",[s("p",[t._v("12、this.finishRefresh();\n结束刷新")])])]),t._v(" "),s("h3",{attrs:{id:"springboot调整configuration的执行顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot调整configuration的执行顺序"}},[t._v("#")]),t._v(" SpringBoot调整Configuration的执行顺序")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AutoConfigureBefore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BConfiguration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AConfiguration")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnMissingBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("XXX"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XXX")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("XXX")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("XXX")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnMissingBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("YYY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("YYY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("YYY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("YYY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"微服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微服务"}},[t._v("#")]),t._v(" 微服务")]),t._v(" "),s("p",[t._v("第一代微服务：SpringCloud、Dubbo\n下一代微服务：Service Mesh、Linkerd、Envoy、Istio、Conduit")]),t._v(" "),s("p",[t._v("容器调度编排：Kubernetes")]),t._v(" "),s("p",[t._v("很有潜力的组合：Kubernetes + Service Mesh\n"),s("img",{attrs:{src:"http://cdn.gqsu.top/springBoot10-1.jpg",alt:""}}),t._v("\n未来框架设计图：\n"),s("img",{attrs:{src:"http://cdn.gqsu.top/springBoot10-2.jpg",alt:""}})])])}),[],!1,null,null,null);a.default=e.exports}}]);