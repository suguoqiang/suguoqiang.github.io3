(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{522:function(t,s,a){"use strict";a.r(s);var r=a(6),n=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"_6-3版本新特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3版本新特性"}},[t._v("#")]),t._v(" 6.3版本新特性")]),t._v(" "),a("p",[t._v("参考：https://www.elastic.co/guide/en/elasticsearch/reference/6.3/sql-getting-started.html")]),t._v(" "),a("h4",{attrs:{id:"一、支持sql语句"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、支持sql语句"}},[t._v("#")]),t._v(" 一、支持Sql语句：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("命令")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("DESC table")]),t._v(" "),a("td",[t._v("查看该索引的字段和元数据")])]),t._v(" "),a("tr",[a("td",[t._v("SHOW COLUMNS")]),t._v(" "),a("td",[t._v("功能同上，只是别名")])]),t._v(" "),a("tr",[a("td",[t._v("SHOW FUNCTIONS")]),t._v(" "),a("td",[t._v("列出支持的函数列表，支持通配符过滤")])]),t._v(" "),a("tr",[a("td",[t._v("SHOW TABLES")]),t._v(" "),a("td",[t._v("返回索引列表")])]),t._v(" "),a("tr",[a("td",[t._v("SELECT .. FROM table_name WHERE .. GROUP BY .. HAVING .. ORDER BY .. LIMIT ..")]),t._v(" "),a("td",[t._v("用来执行查询的命令")])])])]),t._v(" "),a("p",[t._v("此外，还支持通配符查询，只是通配符目前只支持"),a("code",[t._v("%")]),t._v("和 "),a("code",[t._v("_")])]),t._v(" "),a("ul",[a("li",[t._v("1、sql RESTful API返回表格形式数据")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("POST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from my_store where price=30"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("2、sql转DSL")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("POST /_xpack/sql/translate\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from my_store where price=30"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("因为 SQL 特性是 xpack 的免费功能，所以是在"),a("code",[t._v("_xpack")]),t._v(" 这个路径下面，\n我们只需要把 SQL 语句传给 query 字段就行了，注意最后面不要加上;结尾，注意是不要！")])]),t._v(" "),a("h5",{attrs:{id:"常见操作命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见操作命令"}},[t._v("#")]),t._v(" 常见操作命令")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("## RESTful 的语法\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT * FROM twitter"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n## 获取所有的索引列表\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SHOW tables"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n## 名称过滤\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"SHOW TABLES 'twit%'\"")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"SHOW TABLES 'twitte_'\"")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n## 查看该索引的字段和元数据\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DESC twitter"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n## 动态生成的字段，查看是否包含某字段\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SHOW COLUMNS IN twitter"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n## 查看ES支持哪些函数\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SHOW FUNCTIONS"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n## 模糊搜索与过滤别名\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"SELECT SCORE(), * FROM twitter WHERE match(twitter, 'sql is') ORDER BY id DESC\"")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nPOST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"SELECT SCORE() as score,name as myname FROM twitter as mytable where name = 'medcl' OR name ='elastic' limit 5\"")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("注意点：如果你的索引名称包含横线，如 logstash-201811，只需要做一个用双引号包含，对双引号进行转义即可，如下：")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("POST /_xpack/sql?format=txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT COUNT(*) FROM \\"logstash-*\\""')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("当然，还可以直接使用命令行交互界面,就和sql语句一样："),a("code",[t._v("elasticsearch-6.3.0 ./bin/elasticsearch-sql-cli")])])]),t._v(" "),a("p",[t._v("于是乎甚至可以通过JDBC连接elasticsearch。")]),t._v(" "),a("h4",{attrs:{id:"二、新增汇总统计功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、新增汇总统计功能"}},[t._v("#")]),t._v(" 二、新增汇总统计功能")]),t._v(" "),a("h4",{attrs:{id:"三、支持java10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、支持java10"}},[t._v("#")]),t._v(" 三、支持java10")]),t._v(" "),a("h4",{attrs:{id:"四、安全更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、安全更新"}},[t._v("#")]),t._v(" 四、安全更新")])])}),[],!1,null,null,null);s.default=n.exports}}]);